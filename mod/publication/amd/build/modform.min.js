define(["jquery","core/log"],function(a,b){var c=function(){var b=".path-mod-publication [name=groupapproval]",c=".path-mod-publication [name=obtainstudentapproval]",d=".path-mod-publication [name=importfrom], ";d+=".path-mod-publication [name=autoimport], "+c;var e=d+", "+b+", "+c;this.importelements=a(e).parents(".fitem"),this.groupmodeelement=a(b).parents(".fitem"),this.obtainstudentapprovalelement=a(c).parents(".fitem"),this.otherimportelements=a(d).parents(".fitem"),this.importfrom=a(".path-mod-publication [name=importfrom]");var f=".path-mod-publication [name=maxfiles], .path-mod-publication [name=maxbytes], ";f+=".path-mod-publication [name=allowedfiletypes], .path-mod-publication [name=obtainteacherapproval]",this.uploadelements=a(f).parents(".fitem"),this.mode=a(".path-mod-publication input[name=mode]"),this.getapproval=a(".path-mod-publication [name=obtainstudentapproval]")};c.prototype.toggle_available_options=function(c){void 0!==c.stopPropagation&&c.stopPropagation();var d=parseInt(a(".path-mod-publication input[name=mode]:checked").val());0===d?c.data.importelements.fadeOut(600).promise().done(function(){c.data.importelements.prop("disabled",!0),c.data.uploadelements.fadeIn(600).promise().done(function(){c.data.uploadelements.prop("disabled",!1)})}):1===d?c.data.uploadelements.fadeOut(600).promise().done(function(){c.data.uploadelements.prop("disabled",!0),1===c.data.getapproval.val()&&1===c.data.importfrom.filter(":selected").data("teamsubmission")?c.data.importelements.fadeIn(600).promise().done(function(){c.data.importelements.prop("disabled",!1)}):c.data.otherimportelements.fadeIn(600).promise().done(function(){c.data.otherimportelements.prop("disabled",!1)}),c.data.toogle_groupapproval_disabled(c)}):(c.data.importelements.fadeOut(600).promise().done(function(){c.data.importelements.prop("disabled",!0)}),c.data.uploadelements.fadeOut(600).promise().done(function(){c.data.uploadelements.prop("disabled",!0)}),b.error("Incorrect comparison of mode (Type: "+typeof d+"; Value: "+d+")","publication"))},c.prototype.toogle_groupapproval_disabled=function(b){void 0!==b.stopPropagation&&b.stopPropagation();var c=parseInt(a(".path-mod-publication input[name=mode]:checked").val()),d=b.data.importfrom.find(":checked"),e=0;d&&(e=d.data("teamsubmission")),0===c||1!==e||0===parseInt(b.data.getapproval.val())?b.data.groupmodeelement.fadeOut(600).promise().done(function(){b.data.groupmodeelement.prop("disabled",!0)}):b.data.groupmodeelement.fadeIn(600).promise().done(function(){b.data.groupmodeelement.prop("disabled",!1)})};var d=new c;return d.initializer=function(){d.mode.change(d,d.toggle_available_options),d.importfrom.change(d,d.toogle_groupapproval_disabled),d.getapproval.change(d,d.toogle_groupapproval_disabled),b.info("Toggle available options once to begin!"),d.toggle_available_options({data:d})},d});