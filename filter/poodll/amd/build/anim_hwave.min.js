define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_horizontal_wave: initialising"),{analyser:null,cvs:null,cvsctx:null,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.analyser=a},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height)},start:function(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser;this.clear();var g=function(){requestAnimationFrame(g);if(f.theinterval){f.core.getByteTimeDomainData(b),e.fillStyle="rgb(200, 200, 200)",e.fillRect(0,0,c,d),e.lineWidth=2,e.strokeStyle="rgb(0, 0, 0)",e.beginPath();for(var h=1*c/a,i=0,j=0;j<a;j++){var k=b[j]/128,l=k*d/2;0===j?e.moveTo(i,l):e.lineTo(i,l),i+=h}e.lineTo(c,d/2),e.stroke()}};g()}}});