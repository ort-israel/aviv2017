define(["jquery","core/log","filter_poodll/utils_amd","filter_poodll/msr_stereoaudio","filter_poodll/msr_whammy","filter_poodll/msr_plain"],function(a,b,c,d,e,f){"use strict";return b.debug("PoodLL MS Recorder: initialising"),{sampleRate:44100,mimeType:"audio/wav",audioChannels:1,bufferSize:2048,therecorder:null,audioctx:null,audioanalyser:null,clone:function(){return a.extend(!0,{},this)},init:function(a,g,h,i){this.audioctx=g,this.audioanalyser=h,"undefined"!=typeof MediaRecorder?(this.therecorder=f,b.debug("using plain recorder")):(c.is_chrome()||c.is_opera||c.is_edge())&&("video"==i?(this.therecorder=e,b.debug("using whammy recorder")):"audio"==i&&(this.therecorder=d,b.debug("using stereo recorder"))),this.therecorder&&this.therecorder.init(this,a,g,i)},start:function(){this.therecorder.start(),this.audioanalyser.start()},stop:function(){this.therecorder.stop(),this.audioanalyser.clear()},pause:function(){this.therecorder.pause(),this.audioanalyser.clear()},resume:function(){this.therecorder.resume(),this.audioanalyser.start()},ondataavailable:function(a){b.debug("ondataavailable:"+a)},onStartedDrawingNonBlankFrames:function(){b.debug("started drawing non blank frames:")},onstop:function(a){b.debug(a)}}});