define(["jquery","core/log"],function(a,b){"use strict";return b.debug("anim_ripple: initialising"),{analyser:null,cvs:null,cvsctx:null,clone:function(){return a.extend(!0,{},this)},init:function(a,b){this.cvs=b,this.cvsctx=b.getContext("2d"),this.analyser=a},clear:function(){this.cvsctx.clearRect(0,0,this.cvs.width,this.cvs.height)},start:function(){this.analyser.core.fftSize=2048;var a=this.analyser.core.fftSize,b=new Uint8Array(a),c=this.cvs.width,d=this.cvs.height,e=this.cvsctx,f=this.analyser;this.clear();var g=function(){requestAnimationFrame(g);if(f.theinterval){f.core.getByteTimeDomainData(b),e.clearRect(0,0,c,d),e.lineWidth=2,e.setLineDash([15,5]),e.strokeStyle="rgb(0, 0, 0)",e.beginPath();var h=100;if(a>0)var i=1+a/5;for(var j=0;j<a;j+=i){var k=b[j]/128,l=k*(d-h)/4,m=h/2+l;e.arc(c/2,d/2,m,0,2*Math.PI)}e.stroke()}};g()}}});